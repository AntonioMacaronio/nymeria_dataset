# This environment.yml has been modified to be able to for the following:, process them into hdf5 and mp4 files, and upload them to S3.
# 1. download Nymeria sequences
# 2. process Nymeria sequences into hdf5 and mp4 files
# 3. upload Nymeria sequences to S3
#
# IMPORTANT: pymomentum requires PyTorch with CUDA from conda-forge (not from pip)
# and is only compatible with ezc3d < 1.6 due to ABI changes in ezc3d 1.6+
#
# NOTE: TorchCodec 0.5.0 with CUDA 12.6 support is installed via pip (compatible with PyTorch 2.7 and CUDA 12.9).
# FFmpeg is required for TorchCodec video decoding with NVDEC hardware acceleration.
# To verify FFmpeg has NVDEC support: ffmpeg -decoders | grep -i nvidia
name: pymeria
channels:
  - conda-forge
  - defaults
dependencies:
  - python=3.10
  - numpy
  - pillow
  - click
  - requests
  - pymomentum>=0.1.33
  - pytorch=*=cuda*
  - libtorch=*=cuda*
  - ezc3d<1.6
  - tqdm
  - ffmpeg=7.*  # Required for TorchCodec video decoding with NVDEC support (versions 4-8)
  - pip
  - pip: # these are all packages installed in just one run of 'pip install'
    - --extra-index-url https://download.pytorch.org/whl/cu126 # this is a flag which applies to all packages installed in this pip run, but in this case, it only affects torchcodec!
    - torchcodec==0.5.0
    - opencv-python
    - loguru
    - projectaria-tools==1.5.5
    - -e .
  - h5py
  - hdf5plugin
  - tyro
  - viser
  - pandas